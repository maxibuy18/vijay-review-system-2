<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vijay Jewellers Review</title>
    <style>
        body {font-family: system-ui; text-align: center; background: #f8f9fa; padding: 20px;}
        .box {max-width: 90%; margin: auto; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px #00000015;}
        .stars {font-size: 50px; margin: 15px 0;}
        textarea {width: 100%; height: 150px; padding: 15px; font-size: 16px; border: 2px solid #ddd; border-radius: 12px; margin: 10px 0;}
        button, a.btn {margin: 10px; padding: 15px 30px; font-size: 18px; border: none; border-radius: 12px; cursor: pointer; text-decoration: none;}
        .copy {background: #4285f4; color: white;}
        .post {background: #34a853; color: white; display: inline-block; width: 85%;}
    </style>
</head>
<body>
    <div class="box">
        <h1>विजय ज्वैलर्स को 5 स्टार रिव्यू दें</h1>
        <p>NFC टैग स्कैन करके आप यहाँ पहुँचे! नीचे रिव्यू तैयार है।</p>
        <div class="stars">★★★★★</div>
        <textarea id="review-text" readonly></textarea><br>
        <button class="copy" onclick="copyReview()">कॉपी करें</button><br>
        <a href="https://g.page/r/CQASqQgR4RvOEBE/review?rating=5" target="_blank" class="btn post">Google पर पोस्ट करें</a>
        <p><small>कॉपी करके पेस्ट कर दें – 5 सेकंड का काम! ❤️</small></p>
    </div>
    <script>
        // रैंडमली हिंदी या इंग्लिश चुनता है
        const language = Math.random() < 0.5 ? 'hindi' : 'english';
        async function generateReview() {
            try {
                const res = await fetch('/api/generate-review', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ rating: 5, language: language })
                });
                const data = await res.json();
                document.getElementById('review-text').value = data.review;
            } catch {
                // fallback
                const fallback = language === 'english'
                    ? "Amazing experience at Vijay Jewellers! Pure gold, latest designs, very helpful staff and reasonable prices. Highly recommended! ⭐⭐⭐⭐⭐"
                    : "विजय ज्वैलर्स में शानदार अनुभव रहा! शुद्ध सोना, नए डिज़ाइन, स्टाफ बहुत मददगार और कीमत भी उचित। बेस्ट ज्वैलरी शॉप! ⭐⭐⭐⭐⭐";
                document.getElementById('review-text').value = fallback;
            }
        }
        function copyReview() {
            const t = document.getElementById('review-text');
            t.select();
            navigator.clipboard.writeText(t.value).then(() => {
                alert('रिव्यू कॉपी हो गया!');
            }).catch(() => {
                alert('कॉपी नहीं हुआ, मैन्युअली कॉपी कर लें।');
            });
        }
        window.onload = generateReview;
    </script>
</body>
</html>
