<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vijay Jewellers Review</title>
    <style>
        body {font-family: system-ui; text-align: center; background: #f8f9fa; padding: 8px; margin: 0;}
        .box {max-width: 600px; margin: auto; background: white; padding: 16px; border-radius: 8px; box-shadow: 0 2px 8px #00000020;}
        .logo {width: 85%; max-width: 280px; height: auto; margin: 10px auto 16px; display: block;}
        textarea {width: 100%; height: 150px; padding: 10px; font-size: 16px; border: 1px solid #ddd; border-radius: 6px; margin: 8px 0; resize: vertical; box-sizing: border-box;}
        button, .post-link {margin: 6px auto; padding: 10px 24px; font-size: 16px; border: none; border-radius: 6px; cursor: pointer; color: white; display: inline-block; width: 90%; max-width: 320px;}
        .generate {background: #ff9800; display: flex; align-items: center; justify-content: center; gap: 10px;}
        .refresh-svg {width: 22px; height: 22px; fill: white; cursor: pointer;}
        .refresh-svg.spinning {animation: spin 1s linear infinite;}
        @keyframes spin {from {transform: rotate(0deg);} to {transform: rotate(360deg);}}
        .copy {background: #4285f4;}
        .post-link {background: #34a853; text-decoration: none; text-align: center;}
        #instruction {font-size: 13px; color: #666; margin-top: 10px;}
        @media (min-width: 768px) {
            .box {padding: 24px; max-width: 500px;}
            textarea {height: 160px;}
            button, .post-link {width: 80%; max-width: 360px; padding: 12px 28px; font-size: 17px;}
        }
        @media (max-width: 480px) {
            .box {padding: 12px;}
            textarea {height: 100px; font-size: 14px;}
            button, .post-link {padding: 10px 20px; font-size: 15px;}
            .logo {max-width: 240px;}
        }
    </style>
</head>
<body>
    <div class="box">
        <img src="logo.png" alt="Vijay Jewellers" class="logo">
        <button class="generate">
            <!-- आपका दिया हुआ SVG icon यहाँ -->
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="white" class="refresh-svg" id="refresh-icon" onclick="generateReview()">
                <path d="M204-318q-22-38-33-78t-11-82q0-134 93-228t227-94h7l-64-64 56-56 160 160-160 160-56-56 64-64h-7q-100 0-170 70.5T240-478q0 26 6 51t18 49l-60 60ZM481-40 321-200l160-160 56 56-64 64h7q100 0 170-70.5T720-482q0-26-6-51t-18-49l60-60q22 38 33 78t11 82q0 134-93 228t-227 94h-7l64 64-56 56Z"/>
            </svg>
            Review Generate
        </button>
        <textarea id="review-text" readonly placeholder="आइकन क्लिक करके रिव्यू जेनरेट करें..."></textarea>
        <button class="copy" onclick="copyReview()" style="display:none;" id="copy-btn">Copy Review</button>
        <a href="https://g.page/r/CQASqQgR4RvOEBE/review" target="_blank" class="post-link" style="display:none;" id="post-link">Google पर पोस्ट करें</a>
        <p><small id="instruction">रिव्यू जेनरेट करने के बाद कॉपी करके Google पेज पर पेस्ट कर दें – 5 सेकंड का काम!</small></p>
    </div>

    <script>
        async function generateReview() {
            document.getElementById('refresh-icon').classList.add('spinning');
            const language = Math.random() < 0.5 ? 'hindi' : 'english';
            try {
                const res = await fetch('/api/generate-review', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ rating: 5, language: language })
                });
                const data = await res.json();
                document.getElementById('review-text').value = data.review;
                document.getElementById('copy-btn').style.display = 'inline-block';
                document.getElementById('post-link').style.display = 'inline-block';
                document.getElementById('instruction').textContent = 'रिव्यू तैयार है! कॉपी करके Google पर पेस्ट करें।';
            } catch {
                const fallback = language === 'english'
                    ? "Amazing experience at Vijay Jewellers! Pure gold, latest designs, very helpful staff and reasonable prices. Highly recommended!"
                    : "विजय ज्वैलर्स में शानदार अनुभव रहा! शुद्ध सोना, नए डिज़ाइन, स्टाफ बहुत मददगार और कीमत भी उचित। बेस्ट ज्वैलरी शॉप!";
                document.getElementById('review-text').value = fallback;
                document.getElementById('copy-btn').style.display = 'inline-block';
                document.getElementById('post-link').style.display = 'inline-block';
            }
            document.getElementById('refresh-icon').classList.remove('spinning');
        }

        function copyReview() {
            const t = document.getElementById('review-text');
            if (t.value) {
                navigator.clipboard.writeText(t.value).then(() => {
                    alert('रिव्यू कॉपी हो गया!');
                }).catch(() => {
                    alert('कॉपी नहीं हुआ, मैन्युअली सिलेक्ट करके कॉपी कर लें।');
                });
            }
        }
    </script>
</body>
</html>
